 # Event

## 飞行器开机进度

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** drone_open

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"close_putter":"闭合推杆","open_drone":"打开无人机"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 50,
				"step_key": "open_drone"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "drone_open",
	"need_reply": 0
}
```

## 飞行器关机进度

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** drone_close

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"close_putter":"闭合推杆","close_drone":"关闭无人机"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 20,
				"step_key": "close_drone"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "drone_close",
	"need_reply": 0
}
```

## 遥控器开启进度（黑砂独有）

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** rc_open

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"turn_on_rc":"打开遥控器"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 20,
				"step_key": "turn_on_rc"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "rc_open",
	"need_reply": 0
}
```

## 遥控器关闭进度（黑砂独有）

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** rc_close

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"turn_off_rc":"关闭遥控器"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 20,
				"step_key": "turn_off_rc"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "rc_close",
	"need_reply": 0
}
```


## 关闭舱盖进度

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** cover_close

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"close_cover":"关闭舱盖"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 58,
				"step_key": "close_cover"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "cover_close",
	"need_reply": 0
}
```

## 打开舱盖进度



**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** cover_open

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"open_cover":"打开舱盖"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 70,
				"step_key": "open_cover"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "cover_open",
	"need_reply": 0
}
```

## 推杆闭合进度



**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** putter_close

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"close_putter":"闭合推杆"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 30,
				"step_key": "close_putter"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "putter_close",
	"need_reply": 0
}
```

## 推杆展开进度

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** putter_open

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"free_putter":"展开推杆"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 80,
				"step_key": "free_putter"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "putter_open",
	"need_reply": 0
}
```


## 打开充电进度

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** charge_open

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"close_putter":"闭合推杆","close_drone":"关闭飞行器","start_charge":"开始充电"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 15,
				"step_key": "close_putter"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "charge_open",
	"need_reply": 0
}
```


## 关闭充电进度



**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** charge_close

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"stop_charge":"停止充电"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 80,
				"step_key": "stop_charge"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "charge_close",
	"need_reply": 0
}
```

## 飞行器数据格式化进度

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** drone_format

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||
|»progress|进度|struct|  ||
|»»percent|进度百分比|int| {"max":"100","min":"0","step":"1","unit_name":"百分比 / %"} ||
|»»step_key|当前步骤|enum_string| {"format_drone":"格式化飞行器数据"} ||
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"progress": {
				"percent": 80,
				"step_key": "format_drone"
			},
			"status": "in_progress"
		},
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "drone_format",
	"need_reply": 0
}
```

## flyto 执行结果事件通知



**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** fly_to_point_progress

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|fly_to_id|飞向目标点 ID|text|  ||
|status|状态|enum_string| {"wayline_cancel":"取消飞向目标点","wayline_failed":"执行失败","wayline_ok":"执行成功，已飞向目标点","wayline_progress":"执行中"} ||
|result|返回码|int|  |非 0 代表错误|
|way_point_index|当前执行到第几个航点|int|  ||
|remaining_distance|剩余任务距离|float| {"step":0.1,"unit_name":"米 / m"} ||
|remaining_time|剩余任务时间|float| {"step":0.1,"unit_name":"秒 / s"} ||
|planned_path_points|规划的轨迹点列表|array|  {"size": -, "item_type": struct}  ||
|»latitude|轨迹点纬度|double| {"max":90,"min":-90} |轨迹点纬度，角度值，南纬是负，北纬是正，精度到小数点后6位|
|»longitude|轨迹点经度|double| {"max":180,"min":-180} |轨迹点经度，角度值，东经是正，西经是负，精度到小数点后6位|
|»height|轨迹点高度|float| {"step":0.1,"unit_name":"米 / m"} |轨迹点高度，椭球高|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"fly_to_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
		"planned_path_points": [
			{
				"height": 123.234,
				"latitude": 13.23,
				"longitude": 123.234
			}
		],
		"remaining_distance": 0,
		"remaining_time": 0,
		"result": 0,
		"status": "wayline_progress",
		"way_point_index": 0
	},
	"need_reply": 1,
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 16540709686556,
	"method": "fly_to_point_progress"
}
```




## 一键起飞结果事件通知



**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** takeoff_to_point_progress

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|status|任务状态|enum_string| {"task_finish":"一键起飞任务完成","task_ready":"准备起飞","wayline_cancel":"取消飞向目标点","wayline_failed":"执行失败","wayline_ok":"执行成功，已飞向目标点","wayline_progress":"执行中"} ||
|result|返回码|int|  |非 0 代表错误|
|flight_id|一键起飞任务 UUID|text|  ||
|track_id|航迹 ID|text|  ||
|way_point_index|当前执行到第几个航点|int|  ||
|remaining_distance|剩余任务距离|float| {"step":0.1,"unit_name":"米 / m"} ||
|remaining_time|剩余任务时间|float| {"step":0.1,"unit_name":"秒 / s"} ||
|planned_path_points|规划的轨迹点列表|array|  {"size": -, "item_type": struct}  ||
|»latitude|轨迹点纬度|double| {"max":90,"min":-90} |轨迹点纬度，角度值，南纬是负，北纬是正，精度到小数点后6位|
|»longitude|轨迹点经度|double| {"max":180,"min":-180} |轨迹点经度，角度值，东经是正，西经是负，精度到小数点后6位|
|»height|轨迹点高度|float| {"step":0.1,"unit_name":"米 / m"} |轨迹点高度，椭球高|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"flight_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
		"planned_path_points": [
			{
				"height": 123.234,
				"latitude": 13.23,
				"longitude": 123.234
			}
		],
		"remaining_distance": 0,
		"remaining_time": 0,
		"result": 0,
		"status": "wayline_ok",
		"track_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
		"way_point_index": 1
	},
	"need_reply": 1,
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 16540709686556,
	"method": "takeoff_to_point_progress"
}
```

## Joystick 控制无效原因通知

Joystick 是一个无人机综合控制功能，若不可用，则无法使用 drone_control 能力，实现手动操控

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** joystick_invalid_notify

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|reason|任务状态|int| {"0":"遥控器失联","1":"低电量返航","2":"低电量降落","3":"靠近限飞区","4":"遥控器夺权（例如：触发了返航，B控夺权）"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"reason": 0
	},
	"need_reply": 1,
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "joystick_invalid_notify"
}
```




## 上报拍照进度（目前仅支持全景拍照模式）

当拍照行为需持续进行时会通过该事件上报进度。目前仅支持：全景拍照模式

**Topic:** thing/product/*{gateway_sn}*/events

**Direction:** up

**Method:** camera_photo_take_progress

**Data:** 

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|output|输出|struct|  ||
|»status|拍照状态|enum_string| {"fail":"失败","in_progress":"执行中","ok":"完成"} ||
|»progress|进度|struct|  ||
|»»current_step|执行步骤|enum_int| {"3000":"全景图拍摄未开始或者已结束","3002":"全景图正在拍摄","3005":"全景图合成中"}	 ||
|»»percent|进度值|int| {"max":"100","min":"0","step":"1"} ||
|»ext|扩展内容|struct|  ||
|»»camera_mode|当前相机模式|enum_int| {"3":"全景拍照"} ||
|result|返回码|int|  |非 0 代表错误|
|need_reply|是否需要回复|enum_int|{"0":"不需要","1":"需要"}||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"output": {
			"ext": {
				"camera_mode": 3
			},
			"progress": {
				"current_step": 0,
				"percent": 100
			},
			"status": "ok"
		},
		"result": 0
	},
	"need_reply": 0,
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_photo_take_progress"
}
```

 # Service

## 飞行器开机



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** drone_open

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** drone_open

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||


## 飞行器关机

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** drone_close

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** drone_close

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||

## 遥控器开机（黑砂独有）

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** rc_open

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** rc_open

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||

## 遥控器关机（黑砂独有）

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** rc_close

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** rc_close

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||



## 打开舱盖



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** cover_open

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** cover_open

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||


## 关闭舱盖



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** cover_close

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** cover_close

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||


## 推杆展开



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** putter_open

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** putter_open

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  ||
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||


## 推杆闭合



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** putter_close

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** putter_close

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  ||
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||


## 打开充电



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** charge_open

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** charge_open

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||

## 关闭充电


**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** charge_close

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** charge_close

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||

## 飞行器数据格式化



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** drone_format

**Data:** null 



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** drone_format

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"canceled":"取消或终止","failed":"失败","in_progress":"执行中","ok":"执行成功","paused":"暂停","rejected":"拒绝","sent":"已下发","timeout":"超时"} ||


## 一键起飞

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** takeoff_to_point

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|target_latitude|目标点纬度|double| {"max":90,"min":-90} |目标点纬度，角度值，南纬是负，北纬是正，精度到小数点后6位|
|target_longitude|目标点经度|double| {"max":180,"min":-180} |目标点经度，角度值，东经是正，西经是负，精度到小数点后6位|
|target_height|目标点高度|float| {"max":1500,"min":2,"step":0.1,"unit_name":"米 / m"} |目标点高度（椭球高），使用 WGS84 模型，飞行器到点后默认行为：悬停|
|security_takeoff_height|安全起飞高度|float| {"max":1500,"min":20,"step":0.1,"unit_name":"米 / m"} |相对(机场)起飞点的高度（ALT），飞行器先升到特定的高度，然后再飞向目标点。|
|rth_mode|【必填】返航模式设置值|enum_int| {"0":"智能高度","1":"设定高度"} |智能返航模式下，飞行器将自动规划最佳返航高度。大疆机场当前不支持设置返航高度模式，只能选择&#39;设定高度&#39;模式。当环境，光线不满足视觉系统要求时（譬如傍晚阳光直射、夜间弱光无光），飞行器将使用您设定的返航高度进行直线返航|
|rth_altitude|返航高度|int| {"max":1500,"min":2,"step":1,"unit_name":"米 / m"} |相对(机场)起飞点的高度，相对高 ALT|
|rc_lost_action|遥控器失控动作|enum_int| {"0":"悬停","1":"着陆(降落)","2":"返航"} |遥控器失控动作|
|commander_mode_lost_action|【必填】指点飞行失控动作|enum_int| {"0":"继续执行指点飞行任务","1":"退出指点飞行任务，执行普通失控行为"} ||
|commander_flight_mode|【必填】指点飞行模式设置值|enum_int| {"0":"智能高度飞行","1":"设定高度飞行"} ||
|commander_flight_height|【必填】指点飞行高度|float| {"max":3000,"min":2,"step":0.1,"unit_name":"米 / m"} |相对(机场)起飞点的高度，相对高 ALT|
|flight_id|一键起飞任务 UUID|text|  |任务 UUID，全局唯一，用于染色，云端区分该值是普通计划任务还是一键起飞任务|
|max_speed|一键起飞的飞行过程中能达到的最大速度|int| {"max":15,"min":1,"unit_name":"米每秒 / m/s"} ||
|simulate_mission|是否在模拟器中执行任务|struct|  |可选字段，用于在室内进行模拟任务调试。|
|»is_enable|是否开启模拟器任务|enum_int| {"0":"不开启","1":"开启"} |当次任务打开或关闭模拟器|
|»latitude|纬度|double| {"max":"90.0","min":"-90.0"} ||
|»longitude|经度|double| {"max":"180.0","min":"-180.0"} ||
|flight_safety_advance_check|飞行安全预检查|bool| {"0":"关闭","1":"开启"} |设置一键起飞和航线任务中的飞行安全是否预先检查。此字段为可选，默认为0，值为0表示关闭，1表示开启。飞行安全预先检查表示: 飞行器执行任务前，检查自身作业区文件是否与云端一致，如果不一致则拉取文件更新，如果一致则不处理|

**Example:**
```json
{
    "bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
    "data": {
        "flight_id": "ABDEAC21DCADDA",
        "max_speed": 12,
        "rc_lost_action": 0,
        "rth_altitude": 100,
        "security_takeoff_height": 100,
        "target_height": 100,
        "target_latitude": 12.23,
        "target_longitude": 12.32,
        "commander_mode_lost_action": 1,
        "commander_flight_height": 80,
        "flight_safety_advance_check": 1
    },
    "tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
    "timestamp": 1654070968655
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** takeoff_to_point

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "takeoff_to_point"
}
```


## flyto 飞向目标点

特别说明：飞行器有最低飞行高度(20m)安全保障机制，如果飞行器相对起飞点高度低于20m，会先上升到20m

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** fly_to_point

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|fly_to_id|飞向目标点 ID|text|  ||
|max_speed|flyto 的飞行过程中能达到的最大速度|int| {"max":15,"min":0,"unit_name":"米每秒 / m/s"} ||
|points|flyto 目标点列表|array|  {"size": -, "item_type": struct}  |仅支持 1 个目标点|
|»latitude|目标点纬度|double| {"max":90,"min":-90} |目标点纬度，角度值，南纬是负，北纬是正，精度到小数点后6位|
|»longitude|目标点经度|double| {"max":180,"min":-180} |目标点经度，角度值，东经是正，西经是负，精度到小数点后6位|
|»height|目标点高度|float| {"max":10000,"min":2,"step":0.1,"unit_name":"米 / m"} |目标点高度（椭球高），使用 WGS84 模型|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"fly_to_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
		"max_speed": 12,
		"points": [
			{
				"height": 100,
				"latitude": 12.23,
				"longitude": 12.23
			}
		]
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "fly_to_point"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** fly_to_point

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "fly_to_point"
}
```


## 结束 flyto 飞向目标点任务

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** fly_to_point_stop

**Data:** null 



**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "fly_to_point_stop"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** fly_to_point_stop

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "fly_to_point_stop"
}
```


## 更新 flyto 目标点

「一键起飞」或「flyto 飞向目标点」的过程中，可以通过该命令快速更新目标点

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** fly_to_point_update

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|max_speed|指令飞行过程中能达到的最大速度|int| {"max":15,"min":1,"unit_name":"米每秒 / m/s"} ||
|points|更新的目标点列表|array|  {"size": -, "item_type": struct}  |仅支持 1 个目标点|
|»latitude|目标点纬度|double| {"max":90,"min":-90} |目标点纬度，角度值，南纬是负，北纬是正，精度到小数点后6位|
|»longitude|目标点经度|double| {"max":180,"min":-180} |目标点经度，角度值，东经是正，西经是负，精度到小数点后6位|
|»height|目标点高度|float| {"max":10000,"min":2,"step":0.1,"unit_name":"米 / m"} |目标点高度（椭球高），使用 WGS84 模型|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"max_speed": 12,
		"points": [
			{
				"height": 100,
				"latitude": 12.23,
				"longitude": 12.23
			}
		]
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "fly_to_point_update"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** fly_to_point_update

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "fly_to_point_update"
}
```

## 负载控制—切换相机模式



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** camera_mode_switch

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|
|camera_mode|相机模式|enum_int| {"0":"拍照","1":"录像","2":"智能低光","3":"全景拍照"} ||

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"camera_mode": 0,
		"payload_index": "39-0-7"
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_mode_switch"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** camera_mode_switch

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_mode_switch"
}
```


## 负载控制—开始拍照



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** camera_photo_take

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"payload_index": "39-0-7"
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_photo_take"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** camera_photo_take

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|
|output|输出|struct|  ||
|»status|任务状态|enum_string| {"in_progress":"执行中"} |当全景拍照或其他持续性拍照行为时会上报状态信息，表达后续会有持续的进度事件上报，详细内容请查看 camera_photo_take_progress 事件|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_photo_take"
}
```

## 负载控制—停止拍照（目前仅支持全景拍照模式）

停止拍照指令，目前仅支持全景拍照模式

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** camera_photo_stop

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"payload_index": "39-0-7"
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_photo_stop"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** camera_photo_stop

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_photo_stop"
}
```


## 负载控制—开始录像

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** camera_recording_start

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"payload_index": "39-0-7"
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_recording_start"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** camera_recording_start

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_recording_start"
}
```


## 负载控制—停止录像

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** camera_recording_stop

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"payload_index": "39-0-7"
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_recording_stop"
}
```

**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** camera_recording_stop

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|


 

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_recording_stop"
}
```

## 负载控制—变焦

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** camera_focal_length_set

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|
|camera_type|相机类型|enum_string| {"ir":"红外","wide":"广角","zoom":"变焦"} |相机类型枚举|
|zoom_factor|变焦倍数|double| {"max":200,"min":2} |变焦倍数，可见光是2-200，红外是2-20|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"camera_type": "zoom",
		"payload_index": "39-0-7",
		"zoom_factor": 5
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_focal_length_set"
}
```



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** camera_focal_length_set

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|


 

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "camera_focal_length_set"
}
```


## 负载控制—重置云台



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** gimbal_reset

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|负载编号|text|  |负载编号，相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|
|reset_mode|重置模式类型|enum_int| {"0":"回中","1":"向下","2":"偏航回中","3":"俯仰向下"} ||


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"payload_index": "39-0-7",
		"reset_mode": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "gimbal_reset"
}
```



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** gimbal_reset

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|


 

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "gimbal_reset"
}
```





## 负载控制—照片存储设置

**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** photo_storage_set

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|
|photo_storage_settings|照片存储设置集合|array|  {"size": -, "item_type": enum_string}  |拍照存储类型{current, wide, zoom, ir}，可多选|


**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"payload_index": "39-0-7",
		"photo_storage_settings": [
			"current",
			"wide",
			"zoom",
			"ir"
		]
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "photo_storage_set"
}
```



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** photo_storage_set

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|


 

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "photo_storage_set"
}
```


## 负载控制—视频存储设置



**Topic:** thing/product/*{gateway_sn}*/services

**Direction:** down

**Method:** video_storage_set

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|payload_index|相机枚举|text|  |相机枚举值。非标准的 device_mode_key，格式为 {type-subtype-gimbalindex}，可以参考[产品支持](https://developer.dji.com/doc/cloud-api-tutorial/cn/overview/product-support.html)|
|video_storage_settings|视频存储设置集合|array|  {"size": -, "item_type": enum_string}  |视频存储类型{current, wide, zoom, ir}，可多选|

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"payload_index": "39-0-7",
		"video_storage_settings": [
			"current",
			"wide",
			"zoom",
			"ir"
		]
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "video_storage_set"
}
```



**Topic:** thing/product/*{gateway_sn}*/services_reply

**Direction:** up

**Method:** video_storage_set

**Data:**

|Column|Name|Type|constraint|Description|
|---|---|---|---|---|
|result|返回码|int|  |非 0 代表错误|


 

**Example:**
```json
{
	"bid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"data": {
		"result": 0
	},
	"tid": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx",
	"timestamp": 1654070968655,
	"method": "video_storage_set"
}
```





 